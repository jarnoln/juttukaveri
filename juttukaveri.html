<!DOCTYPE html>
<html>
<head>
  <title>Audio Recording Example</title>
</head>
<body>
  <h1>Audio Recording Example</h1>

  <button id="startButton">Start Recording</button>
  <button id="stopButton">Stop Recording</button>
  <p id="recordingStatus"></p>
  <script>
    let audioContext;
    let mediaRecorder;
    let recording = false;
    let chunks = [];

    function startRecording() {
      navigator.mediaDevices.getUserMedia({ audio: true })
        .then(function(stream) {
          audioContext = new AudioContext();
          mediaRecorder = new MediaRecorder(stream);
          document.getElementById('recordingStatus').innerHTML = 'Recording'
          mediaRecorder.addEventListener('dataavailable', function(event) {
            chunks.push(event.data);
          });

          mediaRecorder.addEventListener('stop', function() {
            document.getElementById('recordingStatus').innerHTML = 'Not recording'
            const audioBlob = new Blob(chunks, { type: 'audio/webm' });
            const audioURL = URL.createObjectURL(audioBlob);
            const audio = new Audio(audioURL);
            audio.controls = true;
            document.body.appendChild(audio);
          });

          mediaRecorder.start();
        })
        .catch(function(error) {
          document.getElementById('recordingStatus').innerHTML = 'Error accessing microphone:' + error
          console.error('Error accessing microphone:', error);
        });
    }

    function stopRecording() {
      mediaRecorder.stop();
      chunks = [];
      audioContext.close();
    }

    document.getElementById('startButton').addEventListener('click', startRecording);
    document.getElementById('stopButton').addEventListener('click', stopRecording);
    document.getElementById('recordingStatus').innerHTML = 'Not recording'
  </script>
</body>
</html>
